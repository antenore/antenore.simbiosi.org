---
layout: page
---

{% if page.image and page.headerImage %}
    <img class="title-image" src="{{ page.image }}" alt="{{ page.title }}">
{% endif %}

<h1 class="title">{{ page.title }}</h1>

<span class="date">
    <time datetime="{{ page.date | date:"%d-%m-%Y" }}">{{ page.date | date: "%A. %B %d, %Y" }}</time>
    {% if site.read-time %} - {% include read-time.html %}{% endif %}
</span>

{% if site.show-tags %}
    <div class="post-tags">
        {% for tag in page.tags %}
            <a class="item" href="{{ site.url }}/tags/#{{ tag | slugify }}">{{ tag }}</a>
        {% endfor %}
    </div>
{% endif %}

{{content}}

{% if site.post-advance-links contains page.category %}
    <div class="blog-navigation">
        {% if page.previous.hidden == false and page.previous.url %}
            <a class="prev" href="{{ site.url }}{{ page.previous.url }}">&laquo; {{ page.previous.title }}</a>
        {% else %}
            <a class="prev"></a>
        {% endif %}
        {% if page.next.hidden == false and page.next.url %}
            <a class="next" href="{{ site.url }}{{ page.next.url }}">{{ page.next.title }} &raquo;</a>
        {% endif %}
    </div>
{% endif %}

{% if site.related %}
    {% include related.html %}
{% endif %}

{% if site.show-author %}
    {% include author.html %}
{% endif %}

{% if site.no_comment_url %}
    <h2>Post comment</h2>
    <form method="POST" action="{{ site.no_comment_url }}" id="comment-form" autocomplete="off">
        <em><a href="https://www.markdownguide.org/">Markdown</a> is allowed, HTML is not. All comments are moderated.</em>
        <br />
        <input name="options[redirect]" type="hidden" value="{{ site.no_comment_redirect }}?from={{ page.url | url_encode }}">
        <input name="options[slug]" type="hidden" value="{{ page.slug }}">
        
        <div style="display:none;" class="spam-check">
            <input name="website" type="text" autocomplete="off" tabindex="-1">
        </div>
        
        <div style="display:none;" class="spam-check">
            <input type="hidden" id="form-timestamp" value="{{ site.time | date: '%s' }}">
            {% assign num1 = site.time | date: '%s' | modulo: 10 | plus: 1 %}
            {% assign num2 = site.time | date: '%M' | modulo: 10 | plus: 1 %}
            {% assign sum = num1 | plus: num2 %}
            <input type="hidden" id="math-expected" value="{{ sum }}">
        </div>
        
        <div class="challenge">
            <label for="math-answer">Verify you're human: {{ num1 }} + {{ num2 }} = </label>
            <input type="number" id="math-answer" required>
        </div>
        
        <input name="fields[name]" type="text" autocomplete="off" placeholder="Name" required>
        <br/>
        <input name="fields[email]" type="email" autocomplete="off" placeholder="Email" required>
        <br/>
        <textarea rows="40" cols="80" name="fields[message]" autocomplete="off" placeholder="Message" required></textarea>
        <br/>
        <button type="submit">Post</button>
    </form>
    
    <!-- Load email encryption script -->
    <script src="{{ site.baseurl }}/assets/js/email-encryption.js" defer></script>
    
    <!-- Add anti-spam validation script that doesn't modify the form submission -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('comment-form');
        if (form) {
            form.addEventListener('submit', function(e) {
                // Check if honeypot field is filled
                const honeypot = document.querySelector('.spam-check input[name="website"]');
                if (honeypot && honeypot.value) {
                    e.preventDefault();
                    return false;
                }
                
                // Check if the math challenge is correct
                const mathAnswer = document.getElementById('math-answer');
                const mathExpected = document.getElementById('math-expected');
                
                if (mathAnswer && mathExpected && 
                    parseInt(mathAnswer.value, 10) !== parseInt(mathExpected.value, 10)) {
                    e.preventDefault();
                    alert('Please solve the math problem correctly.');
                    return false;
                }
                
                // Check if the form was filled too quickly (likely a bot)
                const timestamp = document.getElementById('form-timestamp');
                if (timestamp) {
                    const submissionTime = Math.floor(Date.now() / 1000);
                    const formLoadTime = parseInt(timestamp.value, 10);
                    const timeDiff = submissionTime - formLoadTime;
                    
                    // If form was submitted in less than 3 seconds, likely a bot
                    if (timeDiff < 3) {
                        e.preventDefault();
                        return false;
                    }
                }
            });
        }
    });
    </script>
{% endif %}
{% if site.data.comments[page.slug] %}
  <h2>Comments</h2>
  <div>
    {% for comment_entry in site.data.comments[page.slug] %}
    {% assign comment = comment_entry[1] %}
      <div>
        {{comment.date | date: "%Y-%m-%d"}} {{comment.name | strip_html}}
        <br />
        {{comment.message | strip_html | markdownify }}
      </div>
      <hr>
    {% endfor %}
  </div>
{% endif %}
